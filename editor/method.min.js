/*!
 * Vditor v1.7.20 - A markdown editor written in TypeScript.
 *   
 * MIT License
 * 
 * Copyright (c) 2019 B3log 开源, b3log.org
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Vditor=t():e.Vditor=t()}(window,function(){return function(e){function t(t){for(var r,o,i=t[0],a=t[1],c=0,l=[];c<i.length;c++)o=i[c],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&l.push(n[o][0]),n[o]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);for(s&&s(t);l.length;)l.shift()()}var r={},n={"method.min":0};function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise(function(t,o){r=n[e]=[t,o]});t.push(r[2]=i);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=function(e){return o.p+""+({abcjs:"abcjs",echarts:"echarts","highlight.js":"highlight.js",katex:"katex","markdown-it":"markdown-it",mermaid:"mermaid"}[e]||e)+".bundle.js"}(e);var s=new Error;a=function(t){c.onerror=c.onload=null,clearTimeout(l);var r=n[e];if(0!==r){if(r){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,r[1](s)}n[e]=void 0}};var l=setTimeout(function(){a({type:"timeout",target:c})},12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(t)},o.m=e,o.c=r,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/editor/",o.oe=function(e){throw console.error(e),e};var i=window.webpackJsonpVditor=window.webpackJsonpVditor||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var s=a;return o(o.s="./src/method.ts")}({"./src/assets/icons/copy.svg":function(e,t){e.exports='<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 32 32" width=32px height=32px> <path d="M28.681 11.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-11.5c-1.379 0-2.5 1.121-2.5 2.5v23c0 1.378 1.121 2.5 2.5 2.5h19c1.378 0 2.5-1.122 2.5-2.5v-15.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 9.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268v0zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-19c-0.271 0-0.5-0.229-0.5-0.5v-23c0-0.271 0.229-0.5 0.5-0.5 0 0 11.499-0 11.5 0v7c0 0.552 0.448 1 1 1h7v15.5zM18.841 1.319c-1.612-1.182-2.393-1.319-2.841-1.319h-11.5c-1.378 0-2.5 1.121-2.5 2.5v23c0 1.207 0.86 2.217 2 2.45v-25.45c0-0.271 0.229-0.5 0.5-0.5h15.215c-0.301-0.248-0.595-0.477-0.873-0.681z"></path> </svg>'},"./src/method.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/ts/markdown/abcRender.ts"),o=r("./src/ts/markdown/chartRender.ts"),i=r("./src/ts/markdown/codeRender.ts"),a=r("./src/ts/markdown/mathRender.ts"),c=r("./src/ts/markdown/mermaidRender.ts"),s=r("./src/ts/markdown/render.ts"),l=function(){function e(){}return e.mathRender=a.a,e.mermaidRender=c.a,e.abcRender=n.a,e.codeRender=i.a,e.chartRender=o.a,e.md2html=s.a,e}();t.default=l},"./src/ts/constants.ts":function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return o});var n="1.7.20",o=""},"./src/ts/editor/getText.ts":function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("./src/ts/util/code160to32.ts"),o=function(e){return Object(n.a)((e.textContent+"\n").replace(/\n\n$/,"\n"))}},"./src/ts/i18n/index.ts":function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={en_US:{bold:"Blod",both:"editor & preview",check:"Task List",code:"Code Block",copied:"Copied",copy:"Copy",emoji:"Emoji",fileTypeError:"file type is error",fullscreen:"Fullscreen",headings:"Headings",help:"Help",info:"Info","inline-code":"Inline Code",italic:"Italic",line:"Line",link:"Link",list:"List",nameEmpty:"Name is empty","ordered-list":"Order List",over:"over",performanceTip:"Real-time preview requires ${x}ms, you can close it",preview:"Preview",quote:"Quote",record:"Start Record/End Record",recording:"recording...",redo:"Redo",strike:"Strike",table:"Table",undo:"Undo",upload:"Upload image or file",uploading:"uploading..."},zh_CN:{bold:"粗体",both:"编辑 & 预览",check:"任务列表",code:"代码块",copied:"已复制",copy:"复制",emoji:"表情",fileTypeError:"文件类型不允许上传",fullscreen:"全屏",headings:"标题",help:"帮助",info:"关于","inline-code":"行内代码",italic:"斜体",line:"分隔线",link:"链接",list:"无序列表",nameEmpty:"文件名不能为空","ordered-list":"有序列表",over:"超过",performanceTip:"实时预览需 ${x}ms，可点击编辑 & 预览按钮进行关闭",preview:"预览",quote:"引用",record:"开始录音/结束录音",recording:"录音中...",redo:"重做",strike:"删除线",table:"表格",undo:"撤销",upload:"上传图片或文件",uploading:"上传中..."}}},"./src/ts/markdown/abcRender.ts":function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function c(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},o=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},i=function(e){return void 0===e&&(e=document),n(void 0,void 0,void 0,function(){var t,n;return o(this,function(o){switch(o.label){case 0:return(t=e.querySelectorAll(".language-abc")).length>0?[4,r.e("abcjs").then(r.t.bind(null,"./node_modules/abcjs/src/api/abc_tunebook_svg.js",7))]:[3,2];case 1:n=o.sent().default,t.forEach(function(e){var t=document.createElement("div");e.parentNode.parentNode.replaceChild(t,e.parentNode),n(t,e.textContent.trim(),{}),t.style.overflowX="auto"}),o.label=2;case 2:return[2]}})})}},"./src/ts/markdown/chartRender.ts":function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function c(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},o=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},i=function(e){return void 0===e&&(e=document),n(void 0,void 0,void 0,function(){var t,n;return o(this,function(o){switch(o.label){case 0:return(t=e.querySelectorAll(".language-echarts")).length>0?[4,r.e("echarts").then(r.t.bind(null,"./node_modules/echarts/index.js",7))]:[3,2];case 1:n=o.sent().default,t.forEach(function(e){try{if("true"===e.getAttribute("data-processed"))return;var t=JSON.parse(e.innerHTML.trim());n.init(e).setOption(t),e.setAttribute("data-processed","true")}catch(t){e.className="hljs",e.innerHTML="echarts render error: <br>"+t}}),o.label=2;case 2:return[2]}})})}},"./src/ts/markdown/codeRender.ts":function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r("./src/assets/icons/copy.svg"),o=r.n(n),i=r("./src/ts/i18n/index.ts"),a=r("./src/ts/util/code160to32.ts"),c=function(e,t){void 0===t&&(t="zh_CN"),e.querySelectorAll("pre > code").forEach(function(r,n){if(!(r.className.indexOf("language-mermaid")>-1||r.className.indexOf("language-echarts")>-1||r.className.indexOf("language-abc")>-1||r.style.maxHeight.indexOf("px")>-1||e.className.indexOf("vditor-preview")>-1&&n>5)){var c=document.createElement("div");c.className="vditor-copy",c.innerHTML="<textarea>"+Object(a.a)(r.innerText)+'</textarea><span aria-label="'+i.a[t].copy+"\"\nonmouseover=\"this.setAttribute('aria-label', '"+i.a[t].copy+"')\"\nclass=\"vditor-tooltipped vditor-tooltipped__w\"\nonclick=\"this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '"+i.a[t].copied+"')\">"+o.a+"</span>",r.before(c),r.style.maxHeight=window.outerHeight-40+"px"}})}},"./src/ts/markdown/mathRender.ts":function(e,t,r){"use strict";r.d(t,"a",function(){return l});var n=r("./src/assets/icons/copy.svg"),o=r.n(n),i=r("./src/ts/constants.ts"),a=r("./src/ts/i18n/index.ts"),c=r("./src/ts/util/addStyle.ts"),s=r("./src/ts/util/code160to32.ts"),l=function(e,t){void 0===t&&(t="zh_CN");var n=Object(s.a)(e.innerText);(n.split("$").length>2||n.split("\\(").length>1&&n.split("\\)").length>1)&&r.e("katex").then(r.t.bind(null,"./node_modules/katex/dist/katex.js",7)).then(function(){r.e("katex").then(r.bind(null,"./node_modules/katex/contrib/auto-render/auto-render.js")).then(function(r){Object(c.a)(i.a+"/editor/js/katex/katex.min.css","vditorKatexStyle"),r.default(e,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"$",right:"$",display:!1}]}),e.querySelectorAll(".katex-html").forEach(function(e,r){if(!e.querySelector(".vditor-copy")){var n='<div class="vditor-copy" style="position: absolute">\n<textarea>'+e.previousElementSibling.querySelector("annotation").textContent+'</textarea>\n<span aria-label="'+a.a[t].copy+'" style="top: 2px;right: -20px"\nonmouseover="this.setAttribute(\'aria-label\', \''+a.a[t].copy+"')\" class=\"vditor-tooltipped vditor-tooltipped__w\"\nonclick=\"this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '"+a.a[t].copied+"')\">"+o.a+"</span></div>";e.insertAdjacentHTML("beforeend",n)}})})})}},"./src/ts/markdown/mermaidRender.ts":function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(e){0!==e.querySelectorAll("code.language-mermaid").length&&r.e("mermaid").then(r.t.bind(null,"./node_modules/mermaid/dist/mermaid.core.js",7)).then(function(e){e.init({noteMargin:10},".language-mermaid")})}},"./src/ts/markdown/render.ts":function(e,t,r){"use strict";var n=r("./src/ts/constants.ts"),o=r("./src/ts/editor/getText.ts"),i=r("./src/ts/util/addStyle.ts"),a=function(e){e.core.ruler.after("inline","github-task-lists",function(e){e.tokens.forEach(function(t,r){if("inline"===t.type&&(0===t.content.indexOf("[ ] ")||0===t.content.toLocaleLowerCase().indexOf("[x] "))&&"paragraph_open"===e.tokens[r-1].type&&"list_item_open"===e.tokens[r-2].type){var n=new e.Token("checkbox_input","input",0);n.attrs=[["type","checkbox"],["disabled","true"]],0===t.content.toLocaleLowerCase().indexOf("[x] ")&&n.attrs.push(["checked","true"]),t.children[0].content=t.children[0].content.slice(3),t.children.unshift(n),e.tokens[r-2].attrIndex("class")<0?e.tokens[r-2].attrPush(["class","vditor-task"]):e.tokens[r-2].attrs[r]=["class","vditor-task"]}})})};r.d(t,"a",function(){return u}),r.d(t,"b",function(){return d});var c=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function c(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},s=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},l=function(e,t){return c(void 0,void 0,void 0,function(){var o,c,l;return s(this,function(s){switch(s.label){case 0:return["a11y-dark","a11y-light","agate","an-old-hope","androidstudio","arduino-light","arta","ascetic","atelier-cave-dark","atelier-cave-light","atelier-dune-dark","atelier-dune-light","school-book","atelier-estuary-dark","atelier-estuary-light","atelier-forest-dark","atelier-forest-light","pojoaque","atelier-heath-dark","atelier-heath-light","atelier-lakeside-dark","atelier-lakeside-light","zenburn","atelier-plateau-dark","atelier-plateau-light","atelier-savanna-dark","atelier-savanna-light","atelier-seaside-dark","atelier-seaside-light","atelier-sulphurpool-dark","atelier-sulphurpool-light","atom-one-dark","atom-one-dark-reasonable","atom-one-light","brown-paper","brown-papersq","codepen-embed","color-brewer","darcula","dark","darkula","default","docco","dracula","far","foundation","github","github-gist","gml","googlecode","grayscale","gruvbox-dark","gruvbox-light","hopscotch","hybrid","idea","ir-black","isbl-editor-dark","isbl-editor-light","kimbie.dark","kimbie.light","lightfair","magula","mono-blue","monokai","monokai-sublime","nord","obsidian","ocean","paraiso-dark","paraiso-light","pojoaque","purebasic","qtcreator_dark","qtcreator_light","railscasts","rainbow","routeros","tomorrow","school-book","shades-of-purple","solarized-dark","solarized-light","sunburst","tomorrow-night","tomorrow-night-blue","tomorrow-night-bright","tomorrow-night-eighties","vs","vs2015","xcode","xt256"].includes(e)&&t&&Object(i.a)(n.a+"/editor/js/highlight.js/styles/"+e+".css","vditorHljsStyle"),[4,r.e("markdown-it").then(r.t.bind(null,"./node_modules/markdown-it/index.js",7))];case 1:return o=s.sent().default,c={breaks:!0,html:!0,linkify:!0},t?[4,r.e("highlight.js").then(r.t.bind(null,"./node_modules/highlight.js/lib/index.js",7))]:[3,3];case 2:l=s.sent().default,c.highlight=function(e,t){return"mermaid"===t||"echarts"===t||"abc"===t?e:t&&l.getLanguage(t)?'<pre><code class="language-'+t+' hljs">'+l.highlight(t,e,!0).value+"</code></pre>":'<pre><code class="hljs">'+l.highlightAuto(e).value+"</code></pre>"},s.label=3;case 3:return[2,new o(c).use(a)]}})})},u=function(e,t,r){return void 0===t&&(t="atom-one-light"),void 0===r&&(r=!0),c(void 0,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,l(t,r)];case 1:return[2,n.sent().render(e)]}})})},d=function(e,t){return c(void 0,void 0,void 0,function(){var r;return s(this,function(n){switch(n.label){case 0:return void 0===e.markdownIt?[3,1]:[2,e.markdownIt.render(Object(o.a)(e.editor.element))];case 1:return r=e,[4,l(e.options.preview.hljs.style,t)];case 2:return r.markdownIt=n.sent(),[2,e.markdownIt.render(Object(o.a)(e.editor.element))]}})})}},"./src/ts/util/addStyle.ts":function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(e,t){if(!document.getElementById(t)){var r=document.createElement("link");r.id=t,r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(r)}}},"./src/ts/util/code160to32.ts":function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(e){return e.replace(/\u00a0/g," ")}}}).default});